/*
 Hype GlobalBehavior 1.7
copyright (c) 2018 Max Ziebell, (https://maxziebell.de). MIT-license
*/
!1==="HypeGlobalBehavior"in window&&(window.HypeGlobalBehavior=function(){var d={},f=[],g=function(a,c,b){if("#"!=b.customBehaviorName.substr(0,1)){c=b.customBehaviorName.split("@");a=c.shift();c=0==c.length?Object.keys(window.HYPE.documents):c;for(var e in c)if(window.HYPE.documents.hasOwnProperty(c[e])){var d=window.HYPE.documents[c[e]];d.triggerCustomBehaviorNamed("#"+a);if(d.hasOwnProperty("onGlobalBehavior"))d.onGlobalBehavior("#"+a)}if(HypeGlobalBehavior.hasOwnProperty("onGlobalBehavior"))HypeGlobalBehavior.onGlobalBehavior("#"+
a);e=!b.isBubbleDown&&!b.isBubbleUp;(b.isBubbleDown||e)&&l(a,null);if(b.isBubbleUp||e)window!=top&&window.parent.postMessage({type:"TriggerCustomBehaviorBubbleUp",customBehaviorName:a},"*"),b.childToAvoid&&l(a,b.childToAvoid)}return!0},l=function(a,c){[].forEach.call(document.querySelectorAll("iframe"),function(b){b=b.contentWindow;c!=b&&b.postMessage({type:"TriggerCustomBehaviorBubbleDown",customBehaviorName:a},"*")})},h=function(a){g(null,null,{customBehaviorName:a})},m=function(a,c,b){if(null!=
a&&null!=c&&!d.hasOwnProperty(a)){var e=c.hasOwnProperty("FPS")?1E3/c.FPS:1E3*c;b=b?b:{};b.hasOwnProperty("pattern")?(b._buf=b.pattern.slice(0),null==b.countdown&&(b.countdown=Infinity),c=function(){0==b._buf.length&&(b._buf=b.pattern.slice(0));b._buf.shift()&&h(a)}):c=function(){h(a)};d[a]=setInterval(c,e);b.omitFirst||c()}},k=function(a){d.hasOwnProperty(a)&&(clearInterval(d[a]),delete d[a])},n=function(){for(var a in d)k(a)};window.addEventListener("message",function(a){if(f.length&&-1==f.indexOf(a.origin))console.log("Blocked behavior from "+
a.origin);else if(a.data.hasOwnProperty("type")&&a.data.hasOwnProperty("customBehaviorName")){var c="TriggerCustomBehaviorBubbleUp"==a.data.type,b="TriggerCustomBehaviorBubbleDown"==a.data.type;(c||b)&&g(null,null,{customBehaviorName:a.data.customBehaviorName,isBubbleUp:c,isBubbleDown:b,childToAvoid:c?window:null})}},!1);!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,c,b){a.startCustomBehaviorTicker=
function(a,b,c){m(a,b,c)};a.stopCustomBehaviorTicker=function(a){k(a)};a.stopAllCustomBehaviorTicker=function(){n()};return!0}});window.HYPE_eventListeners.push({type:"HypeTriggerCustomBehavior",callback:g});return{version:"1.7",allowPostMessageFrom:function(a){f.push(a)},triggerCustomBehaviorNamed:h,startCustomBehaviorTicker:m,stopCustomBehaviorTicker:k,stopAllCustomBehaviorTicker:n}}());
